<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="20">
<Class name="csp.dictionary">
<ClassType/>
<Hidden>1</Hidden>
<Import>User</Import>
<Language>cache</Language>
<ProcedureBlock>0</ProcedureBlock>
<Super>%CSP.Page</Super>
<TimeCreated>62196,37684.6386</TimeCreated>

<Method name="OnPage">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	Do ..OnPageCSPROOT()
	Quit $$$OK
]]></Implementation>
</Method>

<Method name="OnPageBODY">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<body onload=""load()"">"
	Write !,"<span id=""namfld"">"
	Write "</span>"
	Write "&nbsp;"
	Write "<input type=""text"" id=""fldval"" onkeyup=""gg();"">"
	Write !,"<span id=""KontrGroup"" style=""display:none"">"
	Write "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",!
	Write "	Вид деятельности: ",!
	Write "	"
	Write "<select id=""KontrGroupSel"" onchange=""Show()"">"
	Write !,"	"
	w ##class(Docs.Action2).GetDisplaylistOptions(,"Common.Kontragent||Property2506")
	Write !,"	"
	Write "</select>"
	Write !,"</span>"
	Write !,"<fieldset><legend></legend>",!
	Write " <SKLADList:listview width=100% height=150 id=""Dictionary2"" onAddColumns=""Show()"" zonDblClick=""startFun();"" zonColumnClick=""colclick()""/><br>",!
	Write "  "
	Write !,"<img src=""images/new.gif"" onmouseover=""newtov1.src='images/Onnew.gif'"" onmouseout=""newtov1.src='images/new.gif'""  id=""newtov1"" name=""newtov1"" alt=""Создать запись"" onclick=""ItemPlan()"" style="""">"
	Write !,"  "
	Write !,"<img src=""images/edit.gif"" onmouseover=""edititem.src='images/Onedit.gif'"" onmouseout=""edititem.src='images/edit.gif'""  id=""edititem"" name=""edititem"" alt=""Редактировать запись"" onclick=""ItemPlan(Dictionary2.ItemID)"" style="""">"
	Write !,"  "
	Write "<!--",!
	Write "  <sklad:LittleButton name=""del"" id=""deltov1"" onclick=""demo()"" alt=""Удалить запись"">",!
	Write "  -->"
	Write !,"</fieldset>",!
	Write "<center><br>"
	Write !,"<span class=ButtonDiv ID="""" style=""cursor:hand;"" onmouseover=""this.className='ButtonDivHover'"" onmouseout=""this.className='ButtonDiv'"" onclick=""startFun();"" TITLE=""""><center>Да</center></span>"
	Write !,"<span class=ButtonDiv ID="""" style=""cursor:hand;"" onmouseover=""this.className='ButtonDivHover'"" onmouseout=""this.className='ButtonDiv'"" onclick=""window.close()"" TITLE=""""><center>Отмена</center></span>"
	Write "</center>",!
	Write "</body>"
]]></Implementation>
</Method>

<Method name="OnPageCSPROOT">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[	Do ..OnPageHTML()
]]></Implementation>
</Method>

<Method name="OnPageHEAD">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<head>"
	Write !,"<link href=""style.css"" type=text/css rel=stylesheet>"
	Write !,"<script language=""jscript"" src=""common.js"">"
	Write "</script>"
	Write !,"<script language=""Jscript"">"
	Write !,"sessionid="""_(%session.SessionId)_""";",!
	Write !,"var ColCode="""";",!
	Write "startwhere='"_($G(%request.Data("where",1)))_"';",!
	Write "function load(){",!
	Write "	Dictionary2.ClassName=window.dialogArguments;",!
	Write "	ClassName=window.dialogArguments;",!
	Write "	if(ClassName==""Common.Dictionary4""){",!
	Write "		Dictionary2.loadfrommethod(""Reports.ShowTables.showanalogs"",startwhere);",!
	Write "	}",!
	Write "	else{",!
	Write "		var SkipFields="""";",!
	Write "		if(ClassName==""Users.Dates""){var SkipFields=""Login,Password"";}",!
	Write "		Dictionary2.LoadHeaders(SkipFields);",!
	Write "		}",!
	Write "}",!
	Write !,"function ItemPlan(PlanID){",!
	Write "PlanID=ReturnSpace(PlanID)",!
	Write "ok=window.showModalDialog(""DictItem.csp"",PlanID+"";""+ClassName,""cener:yes;status:no;dialogHeight:350px;dialogWidth:400px;resizable:yes;"")",!
	Write "if(ok==1){Show()}",!
	Write "}",!
	Write !,"function Show(where){",!
	Write "	var where=ReturnSpace(where);",!
	Write "	KontrGroup.style.display=""none"";",!
	Write "	if(ClassName==""Common.Dictionary4""){",!
	Write "		Dictionary2.loadfrommethod(""Common.Common.showanalogs"",startwhere+"" and ""+where);",!
	Write "	}",!
	Write "	else{",!
	Write "		if(ClassName==""Common.Kontragent""){",!
	Write "			KontrGroup.style.display=""inline"";",!
	Write "			var Add="""";",!
	Write "			if(where!=""""){var Add="" and "";}",!
	Write "			if(KontrGroupSel.value!=""""){",!
	Write "				where=where+Add+""Property2506=""+KontrGroupSel.value;",!
	Write "			}",!
	Write "		}",!
	Write "		Dictionary2.DownLoad(where);}",!
	Write "}",!
	Write !,"function startFun(){",!
	Write "	if(ClassName==""Common.Dictionary4""){var itemname=Dictionary2.item(""Property6625--Property3609"")+"" ""+Dictionary2.item(""Property6625--Name"");}",!
	Write "	else{var itemname=Dictionary2.ItemName;}",!
	Write "	window.returnValue=Dictionary2.ItemID+InnerSplitter+itemname;",!
	Write "	window.close();",!
	Write "}",!
	Write !,"function gg(){",!
	Write "if(ColCode=="""")return false;",!
	Write "Show(ColCode+"" %STARTSWITH '""+fldval.value+""'"")",!
	Write "}",!
	Write !,"function colclick(){",!
	Write "	namfld.innerText=Dictionary2.ColName;",!
	Write "	ColCode=Dictionary2.ColCode;",!
	Write "}",!
	Write "</script>"
	Write !,"</head>"
]]></Implementation>
</Method>

<Method name="OnPageHTML">
<ClassMethod>1</ClassMethod>
<CodeMode>code</CodeMode>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[
	Write "<html XMLNS:SKLADList>"
	Write !,"<IMPORT NAMESPACE=""SKLADList"" IMPLEMENTATION=""htc/listview2.htc"">",!
	Do ..OnPageHEAD()
	Write !
	Do ..OnPageBODY()
	Write !,"</html>"
]]></Implementation>
</Method>

<Parameter name="CSPFILE">
<Default>c:\cachesys\csp\sklad2\Dictionary.csp</Default>
</Parameter>

<Parameter name="CSPURL">
<Default>/csp/sklad2/Dictionary.csp</Default>
</Parameter>

<Parameter name="FileTimestamp">
<Default>62164,45157</Default>
</Parameter>
</Class>
</Export>
