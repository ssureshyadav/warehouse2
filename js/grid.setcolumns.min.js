(function(b){b.jgrid.extend({setColumns:function(a){a=b.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},b.jgrid.col,a||{});return this.each(function(){var d=this;if(d.grid){var h=typeof a.beforeShowForm===
"function"?true:false,j=typeof a.afterShowForm==="function"?true:false,k=typeof a.afterSubmitForm==="function"?true:false,f=d.p.id,c="ColTbl_"+f,g={themodal:"colmod"+f,modalhead:"colhd"+f,modalcontent:"colcnt"+f,scrollelm:c};a.recreateForm===true&&b("#"+g.themodal).html()!=null&&b("#"+g.themodal).remove();if(b("#"+g.themodal).html()!=null)h&&a.beforeShowForm(b("#"+c)),b.jgrid.viewModal("#"+g.themodal,{gbox:"#gbox_"+f,jqm:a.jqModal,jqM:false,modal:a.modal});else{var e=isNaN(a.dataheight)?a.dataheight:
a.dataheight+"px",e="<div id='"+c+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+e+";'>";e+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++)d.p.colModel[i].hidedlg||(e+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===false?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+
"'>"+this.p.colNames[i]+(a.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");e+="</tbody></table></div>";e+="<table border='0' class='EditTable' id='"+c+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+(!a.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>":"")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+
a.bCancel+"</a>")+"</td></tr></tbody></table>";a.gbox="#gbox_"+f;b.jgrid.createModal(g,e,a,"#gview_"+d.p.id,b("#gview_"+d.p.id)[0]);a.saveicon[0]==true&&b("#dData","#"+c+"_2").addClass(a.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.saveicon[2]+"'></span>");a.closeicon[0]==true&&b("#eData","#"+c+"_2").addClass(a.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>");a.updateAfterCheck?
b(":input","#"+c).click(function(){var c=this.id.substr(4);c&&(this.checked?b(d).jqGrid("showCol",c):b(d).jqGrid("hideCol",c),a.ShrinkToFit===true&&b(d).jqGrid("setGridWidth",d.grid.width-0.0010,true));return this}):b("#dData","#"+c+"_2").click(function(){for(i=0;i<d.p.colModel.length;i++)if(!d.p.colModel[i].hidedlg){var e=d.p.colModel[i].name.replace(/\./g,"\\.");b("#col_"+e,"#"+c).attr("checked")?(b(d).jqGrid("showCol",d.p.colModel[i].name),b("#col_"+e,"#"+c).attr("defaultChecked",true)):(b(d).jqGrid("hideCol",
d.p.colModel[i].name),b("#col_"+e,"#"+c).attr("defaultChecked",""))}a.ShrinkToFit===true&&b(d).jqGrid("setGridWidth",d.grid.width-0.0010,true);a.closeAfterSubmit&&b.jgrid.hideModal("#"+g.themodal,{gb:"#gbox_"+f,jqm:a.jqModal,onClose:a.onClose});k&&a.afterSubmitForm(b("#"+c));return false});b("#eData","#"+c+"_2").click(function(){b.jgrid.hideModal("#"+g.themodal,{gb:"#gbox_"+f,jqm:a.jqModal,onClose:a.onClose});return false});b("#dData, #eData","#"+c+"_2").hover(function(){b(this).addClass("ui-state-hover")},
function(){b(this).removeClass("ui-state-hover")});h&&a.beforeShowForm(b("#"+c));b.jgrid.viewModal("#"+g.themodal,{gbox:"#gbox_"+f,jqm:a.jqModal,jqM:true,modal:a.modal})}j&&a.afterShowForm(b("#"+c))}})}})})(jQuery);
